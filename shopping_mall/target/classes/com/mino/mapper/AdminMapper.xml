<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="com.mino.mapper.AdminMapper">

<!-- 상품 등록 -->
<insert id="itemEnroll">

		insert into shop_item(itemName, cateCode, itemPrice, itemStock, itemDiscount, itemIntro, itemContents)
		values(#{itemName},#{cateCode}, #{itemPrice},#{itemStock},#{itemDiscount},#{itemIntro},#{itemContents})

</insert>

<!-- 카테고리 리스트  -->
<select id="cateList" resultType="com.mino.domain.CateVO">

	select * from item_cate order by catecode

</select>

<!-- 상품리스트 -->
<select id="shopList" resultType="com.mino.domain.ItemVO">

select  itemId, itemName,  b.cateName, itemStock, a.regDate
		from shop_item a 
		left outer join item_cate b on a.cateCode = b.cateCode
		<if test="keyword != null">
			where (itemName like concat ('%', #{keyword}, '%'))
		</if>
		order by itemId desc 
		limit #{skip}, #{amount}	

</select>

<!-- 상품 총 갯수 -->
<select id="shopTotal" resultType="int">

	select count(*) from shop_item
  		
  		<if test="keyword != null">
  		
  			where itemName like concat('%' , #{keyword}, '%')
  		
  		</if>
  		
</select>

<select id="shopView" resultType="com.mino.domain.ItemVO">

select * from shop_item where itemId=#{itemId}

</select>

<update id="shopModify">

UPDATE shop_item set itemName=#{itemName}, cateCode=#{cateCode}, itemPrice=#{itemPrice},itemStock=#{itemStock},itemDiscount=#{itemDiscount},
itemIntro=#{itemIntro},itemContents=#{itemContents} where itemId = #{itemId}

</update>

<delete id="shopDelete">

delete from shop_item where itemId=#{itemId}

</delete>


  </mapper>